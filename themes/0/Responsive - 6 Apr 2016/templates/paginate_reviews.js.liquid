{% if reviews.size != 0 %}
    var reviews = '';

    {% paginate reviews by 5 remote: true %}
        {% for review in paginate.collection %}
            {% capture review_content %}
                {% include 'product_review', review: review %}
            {% endcapture %}

            reviews += "{{ review_content | escape_javascript }}";
        {% endfor %}

        reviews = $(reviews);
        window.createReadonlyRating(reviews.find('.show-star'));

    {% unless paginate.first_page %}
        reviews.insertAfter($('div.product-review:last'));
    {% else %}
        $('div.product-review').remove();
        reviews.insertBefore($('div.reviews-paginator'));
    {% endunless %}

    {% capture paginator_content %}
        {% include 'reviews_paginator', paginate: paginate %}
    {% endcapture %}

    $('div.reviews-paginator').replaceWith("{{ paginator_content | escape_javascript }}");

    {% endpaginate %}
{% endif %}

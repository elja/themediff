$(function(){
    var dialog = $(".try-it-on-dialog");
    var imageContainer = dialog.find(".try-it-on-preview-area");

    imageContainer.find(".hot-spot-image-container img").attr("src",
        {% if image_src %}"{{ (image_src | escape_javascript) }}"{% else %}"{{ hot_spot_preview_image.preview_url | escape_javascript}}"{% endif %}
    );

    imageContainer.hideLoading();
    imageContainer.find(".hot-spot").remove();

    var container = $(".try-it-on-dialog").find(".hot-spot-setting-container");
    {% if hot_spot_preview_image.custom? %}

    {% capture edit_link %}
        {% include "try_it_on_edit_hot_spots_link" %}
    {% endcapture %}
        container.html("{{ edit_link | escape_javascript }}");
    {% else %}
        container.html("");
    {% endif %}

    $(".try-it-on-dialog").find(".hot-spot-image-container .hot-spot").remove();
    var hotspotImagesContainer = $(".try-it-on-dialog").find(".hotspot-images");
    {% if hot_spot_preview_image.hot_spots == empty %}
        hotspotImagesContainer.block({message:null});
    {% else %}
        hotspotImagesContainer.unblock();
    {% endif %}
});
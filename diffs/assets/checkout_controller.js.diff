REPLACE
function CheckoutController(state, contactJson, addressJson) {
WITH
function CheckoutController(state) {
END

REPLACE
var contactJson = $.parseJSON(contactJson) || {};
var addressJson = $.parseJSON(addressJson) || {};
WITH
END

REPLACE
this.addressJson = $.extend(addressJson, {
    "first_name": contactJson.firstName,
    "last_name": contactJson.lastName,
    "email": contactJson.email,
    "phone": contactJson.phone
});
WITH
END

REPLACE
self.prepareShippingMethods();
WITH
END

REPLACE
self.addressJson
WITH
$(this).data('shipping')
END

REPLACE
promotion_adjustments
WITH
coupons
END

REPLACE
input.first-address
WITH
input.first_address
END

REPLACE
input.second-address
WITH
input.second_address
END

REPLACE
input.first-name
WITH
input.first_name
END

REPLACE
input.second-name
WITH
input.second_name
END
